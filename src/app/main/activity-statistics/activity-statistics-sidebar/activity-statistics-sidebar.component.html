<div class="demo-sidebar">
  <form
    #f="ngForm"
    (ngSubmit)="filterStatistics(f)"
    class="mat-card mat-elevation-z4 p-8 mb-24"
    fxLayout="column"
    fxLayoutAlign="start"
    name="form"
  >
    <div
      fxLayout="row wrap"
      fxLayoutAlign="start center"
      fxFlex="1 0 auto"
      class="mt-8"
    >
      <mat-form-field appearance="outline" fxFlex="100">
        <mat-label>Sélection secteur</mat-label>
        <mat-select
          (selectionChange)="getEmployeesForDepartment()"
          [(ngModel)]="selectedDepartment"
          name="department"
          required
        >
          <mat-option
            *ngFor="let department of departments"
            [value]="department"
          >
            {{ department.name }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="100">
        <mat-label>Sélection salariés</mat-label>
        <mat-select
          required
          name="employees"
          [(ngModel)]="selectedEmployeeId"
          name="employee"
        >
        <mat-option>
          <ngx-mat-select-search
            ngModel
            name="searchINput"
            (ngModelChange)="searchEmployee($event)"
            placeholderLabel="Rechercher"
            noEntriesFoundLabel="pas de resultats"
          ></ngx-mat-select-search>
        </mat-option>
          <mat-option
            *ngFor="let employee of filtredEmployees"
            [value]="employee.id"
            [ngClass]="{
              'disabled-employee': showDisableEmployee && !employee.isActive
            }"
          >
            {{ employee.fullName }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-checkbox
        [(ngModel)]="showDisableEmployee"
        name="showDisableEmployee"
        (change)="getEmployeesForDepartment()"
        >Afficher les salariés désactivés
      </mat-checkbox>
      <mat-checkbox (change)="changeDataCentiemeFormat()"
        >Afficher les données au format centième
      </mat-checkbox>
    </div>
    <div
      fxLayout="row wrap"
      fxLayoutAlign="space-between center"
      fxFlex="1 0 auto"
    >
      <h3 matsubheader>Période d'affichage</h3>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Mois</mat-label>
        <mat-select [(ngModel)]="startMonth" name="month">
          <mat-option *ngFor="let month of months" [value]="month.id">
            {{ month.name | uppercase }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Année</mat-label>
        <mat-select [(ngModel)]="startYear" name="year">
          <mat-option *ngFor="let year of years" [value]="year">
            {{ year }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Mois</mat-label>
        <mat-select [(ngModel)]="endMonth" name="month">
          <mat-option *ngFor="let month of months" [value]="month.id">
            {{ month.name | uppercase }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Année</mat-label>
        <mat-select [(ngModel)]="endYear" name="year">
          <mat-option *ngFor="let year of years" [value]="year">
            {{ year }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutAlign="start center">
      <button type="submit" mat-raised-button color="accent" fxFlex="100">
        Afficher
        <mat-icon class="s-20">filter_list</mat-icon>
      </button>
    </div>

    <div *ngIf="false" class="mt-24 message-box error">
      La fonction 'générer filtre excel' est en tests actuellement. Vous serez
      informés de sa publication prochainement.
    </div>
  </form>
  <div
    class="mat-card mat-elevation-z4 p-8"
    fxLayout="column"
    fxLayoutAlign="start"
  >
    <div
      fxLayout="row wrap"
      fxLayoutAlign="space-between center"
      fxFlex="1 0 auto"
    >
      <h3 matsubheader>Récapitulatif mensuel pour l'ensemble des salariés</h3>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Mois</mat-label>
        <mat-select [(ngModel)]="statsMonth" name="month">
          <mat-option *ngFor="let month of months" [value]="month.id">
            {{ month.name | uppercase }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" fxFlex="48">
        <mat-label>Année</mat-label>
        <mat-select [(ngModel)]="statsYear" name="year">
          <mat-option *ngFor="let year of years" [value]="year">
            {{ year }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div fxLayout="row" fxLayoutAlign="start center">
      <button
        type="button"
        mat-raised-button
        color="warn"
        fxFlex="100"
        (click)="generateStats()"
      >
        Générer
        <mat-icon class="s-20">arrow_downward</mat-icon>
      </button>
    </div>
  </div>
</div>
