<div class="content">
  <div
    class="header"
    fxLayout.gt-md="row"
    fxLayout.lt-md="column"
    fxLayoutAlign="space-between center"
  >
    <div fxLayoutAlign="space-between center" class="pl-4" fxFlex="20">
      <button
        type="button"
        mat-raised-button
        color="accent"
        (click)="addTemporaryWorker()"
      >
        Ajouter un intérimaire
        <mat-icon class="s-20">add</mat-icon>
      </button>
    </div>
    <div
      fxLayoutAlign="space-between center"
      fxFlex="40"
      class="search-wrapper mt-16 mt-md-0 pl-4"
    >
      <div class="search" fxFlex fxLayout="row" fxLayoutAlign="end center">
        <button mat-icon-button class="secondary-text">
          <mat-icon>search</mat-icon>
        </button>
        <input
          placeholder="FILTRE PAR NOM, PRÉNOM, VILLE OU AGENCE"
          name="search"
          (keyup)="filterTemporaryWorkers($event)"
        />
      </div>
    </div>
    <div
      fxLayoutAlign="space-between center"
      class="mt-16 mt-md-0 pl-4"
      fxFlex="25"
    >
      <div fxFlex fxLayout="row" fxLayoutAlign="end center">
        <mat-form-field appearance="outline" fxFlex="100">
          <mat-label>Filter par secteur</mat-label>
          <mat-select
            (selectionChange)="getTemporaryWorkers()"
            [(ngModel)]="selectedDepartment"
            name="department"
          >
            <mat-option
              *ngFor="let department of departments"
              [value]="department"
            >
              {{ department.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>
  </div>
</div>
<div class="mt-12">
  <mat-table [dataSource]="temporaryWorkers">
    <ng-container matColumnDef="firstName">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Prénom</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          {{ temporaryWorker.firstName }}
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="lastName">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Nom</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          {{ temporaryWorker.lastName }}
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="city">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Ville</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          {{ temporaryWorker.city }}
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="birthdate">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Naissance</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          {{ temporaryWorker.birthdate }}
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="provider">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Agence</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          {{ temporaryWorker.provider ? temporaryWorker.provider.name : "" }}
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="country">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Secteurs</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title" *ngIf="temporaryWorker.departments.length != 0">
          <ul>
            <li *ngFor="let department of temporaryWorker.departments">
              {{ department.name }}
            </li>
          </ul>
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="isEnable">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Actif?</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          <mat-icon
            matRipple
            [ngClass]="{
              'green-600': temporaryWorker.isEnable,
              'red-600': !temporaryWorker.isEnable
            }"
            (click)="updateTemporaryWorkerState(temporaryWorker)"
            class="enable-icon s-16"
          ></mat-icon>
        </span>
      </mat-cell>
    </ng-container>
    <ng-container matColumnDef="edition">
      <mat-header-cell fxLayoutAlign="center center" *matHeaderCellDef
        >Édition</mat-header-cell
      >
      <mat-cell fxLayoutAlign="center center" *matCellDef="let temporaryWorker">
        <span class="job-title">
          <div
            class="buttons-row"
            fxLayout="row"
            fxLayoutAlign="space-between center"
          >
            <button
              mat-icon-button
              color="accent"
              class="mat-elevation-z1"
              (click)="updateTemporaryWorker(temporaryWorker)"
            >
              <mat-icon>edit</mat-icon>
            </button>
            <button
              mat-icon-button
              color="warn"
              class="mat-elevation-z1"
              (click)="deleteTemporaryWorker(temporaryWorker)"
            >
              <mat-icon>delete_outline</mat-icon>
            </button>
          </div>
        </span>
      </mat-cell>
    </ng-container>
    <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
    <mat-row
      *matRowDef="let temporaryWorker; columns: displayedColumns"
      class="activity"
      matRipple
    >
    </mat-row>
  </mat-table>
</div>
